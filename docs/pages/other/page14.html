<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jerome&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/Jerome-Blog/logo.svg">
    <meta name="description" content="前端记录">
    <link rel="preload" href="/Jerome-Blog/assets/css/0.styles.82eb12ce.css" as="style"><link rel="preload" href="/Jerome-Blog/assets/js/app.6687f229.js" as="script"><link rel="preload" href="/Jerome-Blog/assets/js/2.2c15370a.js" as="script"><link rel="preload" href="/Jerome-Blog/assets/js/18.198571d7.js" as="script"><link rel="prefetch" href="/Jerome-Blog/assets/js/10.50708421.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/100.02c590b3.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/101.0338a10c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/102.a654b05a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/103.f8e908de.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/104.0f1de850.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/105.917e3891.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/106.f450ca9d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/107.94cdc0b1.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/108.fe931105.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/109.ae5cd168.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/11.9f1d686d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/110.ed7a2dae.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/111.4f372217.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/112.4a006e4c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/113.3e4b65e5.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/114.9022ebf8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/115.58b84c35.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/116.6995670c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/117.e64cd201.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/118.77f1d90a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/119.38fab3c8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/12.6c0d5ca6.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/120.707ee1ac.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/121.44c5ab57.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/122.d32877f0.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/123.000cd55e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/124.a2828198.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/125.fb4b6d38.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/126.ff2a0a2c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/127.d9266048.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/128.5ef288d3.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/129.f652bf55.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/13.f0b8bc17.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/130.d77389ad.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/131.262a0158.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/132.228fc3e7.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/133.8e4d7ce5.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/134.6fed392b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/135.4313a810.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/136.687671de.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/137.264d9a04.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/138.70b73546.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/139.495567ce.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/14.4c468cb8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/140.72a9f898.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/141.c72d4ba6.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/142.cc211787.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/143.419dfccc.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/144.db8a88bc.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/145.07ea8158.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/146.e5ae5080.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/147.a720dce1.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/148.7456bb09.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/149.2869d628.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/15.ecf21726.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/150.86d17c61.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/151.c401ec90.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/152.f53ae0d9.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/153.341aa8a1.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/154.77eea139.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/155.c2d24558.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/156.014e758f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/157.11d84d7e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/158.a8a5b8c9.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/159.000fa58f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/16.8df31e5d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/160.6bc4b693.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/161.8bb52c3d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/162.2b5bae17.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/163.782638ed.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/164.ef5e422f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/165.b1bb2674.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/166.2d8ef5e8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/167.7b156ce0.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/168.adf559ee.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/169.2cad3f99.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/17.d09f8c08.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/170.74dfc6cd.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/171.8a6ff02e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/172.675075b7.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/173.5fe312b6.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/174.62e50231.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/175.86b5d8e2.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/176.d5ee1e39.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/177.de9e9d6a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/178.6fb98151.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/179.3c4456fc.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/180.07cae90c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/181.cc6600a9.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/182.80748311.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/183.479f1b04.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/184.73f71457.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/185.d6fc3822.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/19.7bcaac2d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/20.986683d7.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/21.01ac519c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/22.9cf8b435.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/23.5cb69096.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/24.276954e6.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/25.72d612f7.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/26.577eea92.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/27.eb5bb9aa.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/28.8d8f3f59.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/29.caa0e9ab.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/3.ab167b12.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/30.ffcbc00e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/31.15e9a1f3.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/32.86407d9a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/33.32ff8261.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/34.98696aca.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/35.57663ddb.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/36.6c5dd5db.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/37.017322f8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/38.fc478d55.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/39.3038be11.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/4.2bc98aef.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/40.f5fa975e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/41.4973550a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/42.bd99d6d8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/43.3b83de4d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/44.237896fc.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/45.ef7a752a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/46.563626e6.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/47.ed04de4b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/48.653607f4.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/49.f1f2eee8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/5.c45f0993.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/50.045db4c5.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/51.517b507b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/52.4fc0dd70.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/53.df051606.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/54.b11b8a79.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/55.da31fb13.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/56.feb7c236.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/57.b5af1c14.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/58.c4e5ccab.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/59.62bd78ad.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/6.6c77c85b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/60.c855cad1.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/61.5183de6f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/62.1564fcb0.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/63.db92d611.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/64.c7fab436.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/65.a22ec663.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/66.307a5c4a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/67.fb3fb91b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/68.833987de.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/69.e3d6e3db.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/7.2c2c6c86.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/70.168d9fe2.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/71.1cc47c84.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/72.d934fa0c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/73.ade1dd5e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/74.6302339c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/75.2fc85e2b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/76.a70cd909.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/77.4df1c676.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/78.5862945a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/79.32868583.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/8.2cd4d470.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/80.b05ae174.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/81.ff98423a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/82.a93be095.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/83.d1e5ea2e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/84.bc663abd.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/85.b6a6bdf2.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/86.68f2d804.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/87.85a2541e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/88.7fe692ee.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/89.61a58487.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/9.f8bc05b6.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/90.011cde3f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/91.1044e615.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/92.0556213b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/93.9e1cabdb.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/94.be831064.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/95.0c1de6d0.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/96.eabbab97.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/97.25d1662f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/98.bea40e69.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/99.fe26fd8f.js">
    <link rel="stylesheet" href="/Jerome-Blog/assets/css/0.styles.82eb12ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Jerome-Blog/" class="home-link router-link-active"><img src="/Jerome-Blog/logo.svg" alt="Jerome's Blog" class="logo"> <span class="site-name can-hide">Jerome's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Jerome-Blog/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Jerome-Blog/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Jerome-Blog/pages/vue/page1.html" class="sidebar-link">vue-cli@3.0 相关配置</a></li><li><a href="/Jerome-Blog/pages/vue/page2.html" class="sidebar-link">directive</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>琐碎</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Jerome-Blog/pages/other/page1.html" class="sidebar-link">深色模式开发</a></li><li><a href="/Jerome-Blog/pages/other/page2.html" class="sidebar-link">前端安全</a></li><li><a href="/Jerome-Blog/pages/other/page3.html" class="sidebar-link">数字动态累加特效</a></li><li><a href="/Jerome-Blog/pages/other/page4.html" class="sidebar-link">本地缓存静态资源</a></li><li><a href="/Jerome-Blog/pages/other/page5.html" class="sidebar-link">聊聊各种加密以及加密在HTTPS中的应用</a></li><li><a href="/Jerome-Blog/pages/other/page6.html" class="sidebar-link">localStorage 使用</a></li><li><a href="/Jerome-Blog/pages/other/page7.html" class="sidebar-link">Canvas</a></li><li><a href="/Jerome-Blog/pages/other/page8.html" class="sidebar-link">实现 IOS 下拉弹性效果与背景</a></li><li><a href="/Jerome-Blog/pages/other/page9.html" class="sidebar-link">web worker 前端多线程</a></li><li><a href="/Jerome-Blog/pages/other/page10.html" class="sidebar-link">Event Loop</a></li><li><a href="/Jerome-Blog/pages/other/page11.html" class="sidebar-link">Zepto 的 touch 模块</a></li><li><a href="/Jerome-Blog/pages/other/page12.html" class="sidebar-link">基于 Zepto 实现图片放大缩小功能</a></li><li><a href="/Jerome-Blog/pages/other/page13.html" class="sidebar-link">了解 Javascript 深浅克隆</a></li><li><a href="/Jerome-Blog/pages/other/page14.html" aria-current="page" class="active sidebar-link">Set 和 Map 数据结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/other/page14.html#set" class="sidebar-link">Set</a></li><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/other/page14.html#weakset" class="sidebar-link">WeakSet</a></li><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/other/page14.html#map" class="sidebar-link">Map</a></li><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/other/page14.html#weakmap" class="sidebar-link">WeakMap</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="set-和-map-数据结构"><a href="#set-和-map-数据结构" class="header-anchor">#</a> Set 和 Map 数据结构</h1> <h2 id="set"><a href="#set" class="header-anchor">#</a> Set</h2> <p><code>Set</code> 类似数组，不同点是 <code>Set</code> 成员都是唯一的。<code>Set</code> 判断成员是否相同的算法，使用的是类似精确相等运算符 (<code>===</code>)，不同点是 <code>Set</code> 认为 <code>NaN</code> 等于 <code>NaN</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//  使用 Set 去重</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">set</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// [ 1, 2, 3, 4, 5, 65, 6, 7 ]</span>

<span class="token comment">// for...of... 遍历 Set</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> val <span class="token keyword">of</span> <span class="token keyword">set</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
  <span class="token comment">// 1 </span>
  <span class="token comment">// 2 </span>
  <span class="token comment">// 3 </span>
  <span class="token comment">// 4 </span>
  <span class="token comment">// 5 </span>
  <span class="token comment">// 65</span>
  <span class="token comment">// 6</span>
  <span class="token comment">// 7</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="set-的属性和方法"><a href="#set-的属性和方法" class="header-anchor">#</a> Set 的属性和方法</h3> <ul><li><code>Set.prototype.constructor</code>：构造函数，默认就是 <code>Set</code> 函数，接受一个数组作为参数。</li> <li><code>Set.prototype.size</code>：返回 <code>Set</code> 实例的成员总数。</li></ul> <p><code>Set</code> 实例的方法分为两大类：操作方法（用于操作数据）和遍历方法（用于遍历成员）。下面先介绍四个操作方法。</p> <ul><li><code>Set.prototype.add(value)</code>：添加某个值，返回 <code>Set</code> 结构本身。</li> <li><code>Set.prototype.delete(value)</code>：删除某个值，返回一个布尔值，表示删除是否成功。</li> <li><code>Set.prototype.has(value)</code>：返回一个布尔值，表示该值是否为Set的成员。</li> <li><code>Set.prototype.clear()</code>：清除所有成员，没有返回值。</li></ul> <h3 id="set-遍历方法"><a href="#set-遍历方法" class="header-anchor">#</a> Set 遍历方法</h3> <ul><li><code>Set.prototype.keys()</code>：返回键名的遍历器</li> <li><code>Set.prototype.values()</code>：返回键值的遍历器，由于 <code>Set</code> 结构没有键名，只有键值（或者说键名和键值是同一个值），所以 <code>keys</code> 方法和 <code>values</code> 方法的行为完全一致。</li> <li><code>Set.prototype.entries()</code>：返回键值对的遍历器</li> <li><code>Set.prototype.forEach()</code>：使用回调函数遍历每个成员</li></ul> <h2 id="weakset"><a href="#weakset" class="header-anchor">#</a> WeakSet</h2> <p><code>WeakSet</code> 和 <code>Set</code> 类似，不同点是 <code>WeakSet</code> 的成员都都必须是对象。<code>WeakSet</code> 是不可遍历的，因为成员对象是弱引用，随时可能无法访问。</p> <p>其次，<code>WeakSet</code> 中的对象都是弱引用，即垃圾回收机制不考虑 WeakSet 对该对象的引用，也就是说，如果其他对象都不再引用该对象，那么垃圾回收机制会自动回收该对象所占用的内存，不考虑该对象还存在于 WeakSet 之中。</p> <p>这是因为垃圾回收机制依赖引用计数，如果一个值的引用次数不为 <code>0</code>，垃圾回收机制就不会释放这块内存。结束使用该值之后，有时会忘记取消引用，导致内存无法释放，进而可能会引发内存泄漏。<code>WeakSet</code> 里面的引用，都不计入垃圾回收机制，所以就不存在这个问题。因此，<code>WeakSet</code> 适合临时存放一组对象，以及存放跟对象绑定的信息。只要这些对象在外部消失，它在 WeakSet 里面的引用就会自动消失。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> weakset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>

<span class="token comment">// WeakSet 没有 size 和遍历方法</span>
<span class="token keyword">let</span> example <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> weakset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
weakset<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakset<span class="token punctuation">)</span> <span class="token comment">// WeakSet {div#example}</span>
example <span class="token operator">=</span> <span class="token keyword">null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakset<span class="token punctuation">)</span> <span class="token comment">// WeakSet {div#example}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> val <span class="token keyword">of</span> weakset<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Uncaught TypeError: weakset is not iterable</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>weakset<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="weakset-方法"><a href="#weakset-方法" class="header-anchor">#</a> WeakSet 方法</h3> <ul><li><code>WeakSet.prototype.add(value)</code>：向 <code>WeakSet</code> 实例添加一个新成员。</li> <li><code>WeakSet.prototype.delete(value)</code>：清除 <code>WeakSet</code> 实例的指定成员。</li> <li><code>WeakSet.prototype.has(value)</code>：返回一个布尔值，表示某个值是否在</li></ul> <h2 id="map"><a href="#map" class="header-anchor">#</a> Map</h2> <p><code>Map</code> 类似对象，是一种键值对集合，不同点是对象只接受字符串为键名，而 <code>Map</code> 的键名可以为任意一种类型。</p> <h3 id="创建-map"><a href="#创建-map" class="header-anchor">#</a> 创建 Map</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 或者传入一个键值对的数组</span>
<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'animal'</span><span class="token operator">:</span> <span class="token string">'pig'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">'age'</span><span class="token operator">:</span> <span class="token number">14</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 对象转换为 Map</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  animal<span class="token operator">:</span> <span class="token string">'pig'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">14</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Map 转换为数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>map<span class="token punctuation">)</span> <span class="token comment">// [['animal': 'pig'],['age': 14]]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 对象赋值</span>
<span class="token keyword">let</span> example <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
obj<span class="token punctuation">[</span>example<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'element'</span>
obj<span class="token punctuation">.</span>example <span class="token comment">// undefined</span>
obj<span class="token punctuation">[</span>example<span class="token punctuation">]</span> <span class="token comment">// element</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span> <span class="token comment">// [object HTMLDivElement]</span>
obj<span class="token punctuation">[</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// element</span>

<span class="token comment">// Map 赋值</span>
<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// -0,+0 键名相同</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'true'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="map-的属性和方法"><a href="#map-的属性和方法" class="header-anchor">#</a> Map 的属性和方法</h3> <ul><li><code>size</code>：属性返回 <code>Map</code> 结构的成员总数</li> <li><code>Map.prototype.set(key, value)</code>：设置键名key对应的键值为value，然后返回整个 Map 结构。如果key已经有值，则键值会被更新，否则就新生成该键</li> <li><code>Map.prototype.get(key)</code>：读取key对应的键值，如果找不到key，返回undefined</li> <li><code>Map.prototype.has(key)</code>：返回一个布尔值，表示某个键是否在当前 Map 对象之中</li> <li><code>Map.prototype.delete(key)</code>：删除某个键，返回true。如果删除失败，返回false</li> <li><code>Map.prototype.clear()</code>：清除所有成员，没有返回值</li></ul> <h3 id="map-遍历方法"><a href="#map-遍历方法" class="header-anchor">#</a> Map 遍历方法</h3> <ul><li><code>Map.prototype.keys()</code>：返回键名的遍历器</li> <li><code>Map.prototype.values()</code>：返回键值的遍历器</li> <li><code>Map.prototype.entries()</code>：返回所有成员的遍历器</li> <li><code>Map.prototype.forEach()</code>：遍历 <code>Map</code> 的所有成员</li></ul> <h2 id="weakmap"><a href="#weakmap" class="header-anchor">#</a> WeakMap</h2> <p><code>WeakMap</code> 和 <code>Map</code> 的结构相似，都是一个键值对的集合。</p> <p>其中 <code>WeakMap</code> 和 <code>Map</code> 的有两点区别：</p> <ul><li><code>WeakMap</code> 只接受对象作为键值，不接受其他数据类型。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: 1 is not an object!</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Invalid value used as weak map key</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// TypeError: Invalid value used as weak map key</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>WeakMap</code> 的键引用对象是弱引用，值是正常引用（外部清除不影响），所谓的<strong>弱引用</strong>指 <code>WeakMap</code> 键引用的对象不在垃圾回收机制考虑的范围之内，如果其他对键值对象的引用都清除后，对象的内存就会被释放</li></ul> <p>以往开发中需要引用对象，不再需要时将所有引用的值设置为 <code>null</code>，这样对象的内存就会被释放，从而避免了内存泄漏。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> example <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> example1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>example<span class="token punctuation">,</span> <span class="token string">'arr1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>example1<span class="token punctuation">,</span> <span class="token string">'arr2'</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>

  <span class="token operator">...</span>
  example <span class="token operator">=</span> <span class="token keyword">null</span>
  example <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token operator">...</span>

  <span class="token comment">// 此处还要手动清除 arr 下的值，引用对象的内存才会被释放</span>
  arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
  arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token comment">// 如果忘记手动清除就有可能导致内存泄漏</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>使用 <code>WeakMap</code> 可以有效地避免这种情况</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">let</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> example <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>
  wm<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>example<span class="token punctuation">,</span> <span class="token string">'some information'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// some information</span>
  example <span class="token operator">=</span> <span class="token keyword">null</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>wm<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>example<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// undefined</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">lastUpdate:</span> <span class="time">7/21/2020, 9:05:07 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Jerome-Blog/pages/other/page13.html" class="prev">
        了解 Javascript 深浅克隆
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Jerome-Blog/assets/js/app.6687f229.js" defer></script><script src="/Jerome-Blog/assets/js/2.2c15370a.js" defer></script><script src="/Jerome-Blog/assets/js/18.198571d7.js" defer></script>
  </body>
</html>
