<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Jerome&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/Jerome-Blog/logo.svg">
    <meta name="description" content="前端记录">
    <link rel="preload" href="/Jerome-Blog/assets/css/0.styles.82eb12ce.css" as="style"><link rel="preload" href="/Jerome-Blog/assets/js/app.537a5caa.js" as="script"><link rel="preload" href="/Jerome-Blog/assets/js/2.2c15370a.js" as="script"><link rel="preload" href="/Jerome-Blog/assets/js/10.babfb9ca.js" as="script"><link rel="prefetch" href="/Jerome-Blog/assets/js/11.07ea3b41.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/12.1b7c6b1e.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/13.bcda75b8.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/14.511b1200.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/15.0b63b66c.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/16.96267324.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/17.afe88186.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/18.01f2e165.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/19.5aac0231.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/20.4b538ef3.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/21.0bb5be35.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/22.0a39bb1b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/23.09f41726.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/24.c7a08311.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/25.8a461e13.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/26.0b9a4e8a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/27.85472896.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/28.9dc68c6a.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/29.6768d7db.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/3.ab167b12.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/30.d2f789ee.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/31.04b21dca.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/32.46dc1c98.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/33.bd16e6a0.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/34.50e7dbc0.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/35.b1d13cee.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/36.45d0fbfa.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/37.a7a68ee3.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/38.eac82409.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/39.f9052c49.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/4.2bc98aef.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/40.d0fafd14.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/41.34411fff.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/42.8755166f.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/43.521fdecd.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/44.3c0b258d.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/45.a2755504.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/5.c45f0993.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/6.6c77c85b.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/7.233013df.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/8.24380c04.js"><link rel="prefetch" href="/Jerome-Blog/assets/js/9.6548487e.js">
    <link rel="stylesheet" href="/Jerome-Blog/assets/css/0.styles.82eb12ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Jerome-Blog/" class="home-link router-link-active"><img src="/Jerome-Blog/logo.svg" alt="Jerome's Blog" class="logo"> <span class="site-name can-hide">Jerome's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Jerome-Blog/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Jerome-Blog/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Jerome-Blog/pages/vue/page1.html" class="sidebar-link">vue-cli@3.0 相关配置</a></li><li><a href="/Jerome-Blog/pages/vue/page2.html" class="sidebar-link">directive</a></li><li><a href="/Jerome-Blog/pages/vue/page3.html" class="sidebar-link">Vue 国际化</a></li><li><a href="/Jerome-Blog/pages/vue/page4.html" class="sidebar-link">动态主题</a></li><li><a href="/Jerome-Blog/pages/vue/page5.html" class="sidebar-link">优化无限滚动加载，再多数据页面也不卡顿</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Jerome-Blog/pages/webpack/page1.html" class="sidebar-link">webpack</a></li><li><a href="/Jerome-Blog/pages/webpack/page2.html" class="sidebar-link">webpack 0 到 1</a></li><li><a href="/Jerome-Blog/pages/webpack/page3.html" class="sidebar-link">webpack HMR解析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Bebel 7</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Jerome-Blog/pages/babel/page1.html" class="sidebar-link">babel 7</a></li><li><a href="/Jerome-Blog/pages/babel/page2.html" class="sidebar-link">@babel/cli</a></li><li><a href="/Jerome-Blog/pages/babel/page3.html" aria-current="page" class="active sidebar-link">presets</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/babel/page3.html#babel-preset-env" class="sidebar-link">@babel/preset-env</a></li><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/babel/page3.html#babel-poly-fill" class="sidebar-link">@babel/poly-fill</a></li><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/babel/page3.html#babel-preset-env-babel-poly-fill" class="sidebar-link">@babel/preset-env &amp; @babel/poly-fill</a></li><li class="sidebar-sub-header"><a href="/Jerome-Blog/pages/babel/page3.html#其他的-preset" class="sidebar-link">其他的 preset</a></li></ul></li><li><a href="/Jerome-Blog/pages/babel/page4.html" class="sidebar-link">plugins</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>琐碎</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Jerome-Blog/pages/other/page1.html" class="sidebar-link">requestAnimationFrame、requestIdleCallback、IntersectionObserver</a></li><li><a href="/Jerome-Blog/pages/other/page2.html" class="sidebar-link">前端安全</a></li><li><a href="/Jerome-Blog/pages/other/page3.html" class="sidebar-link">数字动态累加特效</a></li><li><a href="/Jerome-Blog/pages/other/page4.html" class="sidebar-link">本地缓存静态资源</a></li><li><a href="/Jerome-Blog/pages/other/page5.html" class="sidebar-link">聊聊各种加密以及加密在HTTPS中的应用</a></li><li><a href="/Jerome-Blog/pages/other/page6.html" class="sidebar-link">localStorage 使用</a></li><li><a href="/Jerome-Blog/pages/other/page7.html" class="sidebar-link">Canvas</a></li><li><a href="/Jerome-Blog/pages/other/page8.html" class="sidebar-link">实现 IOS 下拉弹性效果与背景</a></li><li><a href="/Jerome-Blog/pages/other/page9.html" class="sidebar-link">web worker 前端多线程</a></li><li><a href="/Jerome-Blog/pages/other/page10.html" class="sidebar-link">Event Loop</a></li><li><a href="/Jerome-Blog/pages/other/page11.html" class="sidebar-link">Zepto 的 touch 模块</a></li><li><a href="/Jerome-Blog/pages/other/page12.html" class="sidebar-link">基于 Zepto 实现图片放大缩小功能</a></li><li><a href="/Jerome-Blog/pages/other/page13.html" class="sidebar-link">了解 Javascript 深浅克隆</a></li><li><a href="/Jerome-Blog/pages/other/page14.html" class="sidebar-link">Set 和 Map 数据结构</a></li><li><a href="/Jerome-Blog/pages/other/page15.html" class="sidebar-link">JavaScript 知识点</a></li><li><a href="/Jerome-Blog/pages/other/page16.html" class="sidebar-link">head 和 body 内的 JS 区别</a></li><li><a href="/Jerome-Blog/pages/other/page17.html" class="sidebar-link">JsBridge：Web 和客户端双向通信</a></li><li><a href="/Jerome-Blog/pages/other/page18.html" class="sidebar-link">深入了解 js 柯里化</a></li><li><a href="/Jerome-Blog/pages/other/page19.html" class="sidebar-link">git 常用操作</a></li><li><a href="/Jerome-Blog/pages/other/page20.html" class="sidebar-link">flow</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="presets"><a href="#presets" class="header-anchor">#</a> presets</h1> <h2 id="babel-preset-env"><a href="#babel-preset-env" class="header-anchor">#</a> @babel/preset-env</h2> <p>Babel 7 是一系列插件的集合，不存在 Babel 6 中使用到的 es2015/es2016/es2017 等语法转换插件。</p> <h3 id="配置参数"><a href="#配置参数" class="header-anchor">#</a> 配置参数</h3> <ul><li>targets: 项目要支持的目标浏览器环境
<ul><li>示例环境： chrome, opera, edge, firefox, safari, ie, ios, android, node, electron</li></ul></li></ul> <p>占有率 &gt; 0.25% 的浏览器</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt; 0.25%, not dead&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最低环境版本支持的对象</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;chrome&quot;</span><span class="token operator">:</span> <span class="token string">&quot;58&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ie&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>loose: 允许所有插件启用“宽松”转换</li> <li>modules: 指定输出文件的转换模块规范。一般在 webpack 项目中，将参数设置为 false，即将 module 交由 webpack 处理，而不是 babel.</li></ul> <p>&quot;amd&quot; | &quot;umd&quot; | &quot;systemjs&quot; | &quot;commonjs&quot; | &quot;cjs&quot; | &quot;auto&quot; | false, defaults to &quot;auto&quot;</p> <ul><li><p>useBuiltIns: polyfill 的处理方式</p> <ul><li>usage：按需引入</li> <li>entry：入口文件全局引入</li></ul></li> <li><p>corejs: 指定 corejs 的版本，默认为 2</p></li> <li><p>configPath: 搜索配置文件的路劲，默认为 process.cwd()</p></li></ul> <h2 id="babel-poly-fill"><a href="#babel-poly-fill" class="header-anchor">#</a> @babel/poly-fill</h2> <p><code>@babel/poly-fill</code> 不仅使 <code>@babel/preset-env</code> 能够转换新的语法变为 <code>Ecmascript5</code> 的写法，还能是转换的代码兼容新的 <code>Api</code>，例如 <code>Array.prototype.includes</code> 等。引入 <code>@babel/poly-fill</code> 一般有两种方式：</p> <ul><li>1.在文件入口直接 <code>import &quot;@babel/poly-fill&quot;</code>;</li> <li>2.配置 <code>@babel/preset-env</code> 的 <code>target</code> 和 <code>useBuiltint</code> 两个参数按需引入</li></ul> <h2 id="babel-preset-env-babel-poly-fill"><a href="#babel-preset-env-babel-poly-fill" class="header-anchor">#</a> @babel/preset-env &amp; @babel/poly-fill</h2> <p>@babel/preset-env &amp; @babel/poly-fill 的关系主要是通过配置参数 <code>target</code> 和 <code>useBuiltint</code> 链接在一起</p> <ul><li>target 支持的浏览器列表</li> <li>useBuiltint 参数有 &quot;entry&quot;、&quot;usage&quot;、false 三个值。默认值是 false，此参数决定了 babel 打包时如何处理 @babel/poly-fill 语句</li></ul> <p>&quot;entry&quot;: 会将文件中 import &quot;@babel/poly-fill&quot; 语句结合 targets ，转换为一系列引入语句，去掉目标浏览器已支持的poly-fill 模块，不管代码里有没有用到，只要目标浏览器不支持都会引入对应的polyfilll 模块。</p> <p>&quot;usage&quot;: 不需要手动在代码里写 import &quot;@babel/poly-fill&quot; ，打包时会自动根据实际代码的使用情况，结合 targets 引入代码里实际用到 部分 poly-fill 模块</p> <p>false: 对 import &quot;@babel/poly-fill&quot;  不作任何处理，也不会自动引入 poly-fill 模块。</p> <blockquote><p>需要注意的是在 webpack 打包文件配置的 entry 中引入的 @babel/polyfill 不会根据 useBuiltIns 配置任何转换处理。</p></blockquote> <h3 id="两种引入方式比较"><a href="#两种引入方式比较" class="header-anchor">#</a> 两种引入方式比较</h3> <ul><li>import &quot;@babel/poly-fill&quot;</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;chrome&quot;</span><span class="token operator">:</span> <span class="token string">&quot;58&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;entry&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">import</span> <span class="token string">&quot;@babel/polyfill&quot;</span>
<span class="token keyword">import</span> utils <span class="token keyword">from</span> <span class="token string">'../utils'</span>
<span class="token function">utils</span><span class="token punctuation">(</span><span class="token string">'jerome'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">typeof</span> a

<span class="token comment">// converted to</span>

<span class="token comment">// compiler.js</span>
<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.array.flat-map&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es6.array.sort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.object.define-getter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.object.define-setter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.object.lookup-getter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.object.lookup-setter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.promise.finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.symbol.async-iterator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.string.trim-left&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.string.trim-right&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/web.timers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/web.immediate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/web.dom.iterable&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> _utils <span class="token operator">=</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>__esModule <span class="token operator">?</span> obj <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> obj <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _utils<span class="token punctuation">.</span>default<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'jerome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">typeof</span> a<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>输出的 compiler.js 会引入目标浏览器所有不支持的 polyfill 统统引入进来，尽管代码中没有用到。</p> <ul><li>按需加载</li></ul> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">&quot;usage&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> utils <span class="token keyword">from</span> <span class="token string">'../utils'</span>
<span class="token function">utils</span><span class="token punctuation">(</span><span class="token string">'jerome'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">typeof</span> a

<span class="token comment">// converted to</span>

<span class="token comment">// compiler.js</span>
<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.symbol.async-iterator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es6.symbol&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;core-js/modules/es7.array.includes&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> _utils <span class="token operator">=</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../utils&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>__esModule <span class="token operator">?</span> obj <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> obj <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_typeof</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token string">&quot;@babel/helpers - typeof&quot;</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> Symbol <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> Symbol<span class="token punctuation">.</span>iterator <span class="token operator">===</span> <span class="token string">&quot;symbol&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function-variable function">_typeof</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">_typeof</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token function-variable function">_typeof</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">_typeof</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> obj <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> Symbol <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Symbol <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token class-name">Symbol</span><span class="token punctuation">.</span>prototype <span class="token operator">?</span> <span class="token string">&quot;symbol&quot;</span> <span class="token operator">:</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">return</span> <span class="token function">_typeof</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> Constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>instance <span class="token keyword">instanceof</span> <span class="token class-name">Constructor</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot call a class as a function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> _utils<span class="token punctuation">[</span><span class="token string">&quot;default&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'jerome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> a <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">:</span> <span class="token function">_typeof</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>输出的 compiler.js 只会引入代码中使用到的并且目标浏览器不支持的 poly-fill</p> <h2 id="其他的-preset"><a href="#其他的-preset" class="header-anchor">#</a> 其他的 preset</h2> <ul><li>@babel/preset-react</li> <li>@babel/preset-typescript</li> <li>@vue/babel-preset-jsx</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">lastUpdate:</span> <span class="time">11/20/2020, 2:33:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Jerome-Blog/pages/babel/page2.html" class="prev">
        @babel/cli
      </a></span> <span class="next"><a href="/Jerome-Blog/pages/babel/page4.html">
        plugins
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Jerome-Blog/assets/js/app.537a5caa.js" defer></script><script src="/Jerome-Blog/assets/js/2.2c15370a.js" defer></script><script src="/Jerome-Blog/assets/js/10.babfb9ca.js" defer></script>
  </body>
</html>
